# YABL script
## 格式
yabl脚本格式选择基于yaml配置文件格式，可以用任何yaml接口序列化和反序列化。一个yabl脚本文件一定是一份yaml格式的文件。  
  
和yaml、json一样，yabl脚本文件支持utf-8、utf-16、utf-32编码。同样，yabl脚本使用`#`符号标识一行注释。这使得yabl脚本文件拥有unix环境下的shebang支持。  
  
A shebang example:
```yaml
#!/bin/yabl -s
...
```

yabl脚本中可以配置服务器监听的IP和端口，优先级低于命令行参数中配置。
```yaml
address: 127.0.0.1
port: 8080
```
## 设计
yabl脚本为函数式语言，函数运行在运行时栈中。函数可以有0个或1个或多个参数，必然有一个返回值。一份有效的yabl脚本中有且仅有一个无参数的main函数作为运行入口函数，其他函数又main函数调用。  

yabl函数中所有的变量都是字符串类型，同时规定长度不为0的字符串代表布尔值true，长度为0的字符串代表布尔值false用于条件判断和流控。若函数返回时没有提供返回值，则返回空字符串即false。

yabl脚本中除了函数调用外（函数调用允许多个参数）所有表达式都是三地址操作，定义了一些保留关键字用于定义字符串的运算和收发消息的原语。
## 词法
yabl脚本中的词法单元分三种：
1. 标识符
2. 关键字
3. 字符串常量  

词法单元必须以空格分割，未使用空格分割的两个词法单元将被视为一个词法单元。
>标识符：  
>可以使用一个或多个除空格、换行外的任何utf-8字符组成一个标识符。标识符不可以和关键字同名。

>关键字：  
>共有21个关键字，分别是  
>1. =`赋值关键字`
>2. if`分支 if`
>3. else`分支 else`
>4. elif`分支 else if`
>5. fi`分支结束标志`
>6. loop`循环体开始标志`
>7. pool`循环体结束标志`
>8. continue`循环继续`
>9. break`打断循环`
>10. return`函数返回`
>11. equal`判断两个字符串是否完全一致`
>12. and`对两个字符串进行布尔和`
>13. or`对两个字符串进行布尔或`
>14. not`对字符串进行布尔非`
>15. join`对两个字符串进行连接`
>16. contain`判断第一个字符串是否包含第二个`
>17. hasprefix`判断第二个字符串是否是第一个字符串的前缀`
>18. hassuffix`判断第二个字符串是否是第一个字符串的后缀`
>19. invoke`执行某个函数`
>20. getmsg`从用户处接收字符串，将阻塞运行`
>21. postmsg`向用户发送字符串`

>字符串常量  
>字符串常量必需用双引号进行包裹，并对换行符、水平制表符、反斜杠、双引号进行转义。yabl字符串不接受换行符、水平制表符以外的不可见字符。  
>转义规则  
>换行符->`\n`  
>水平制表符->`\t`  
>反斜杠->`\\`  
>双引号->`\"`  
## 语法
